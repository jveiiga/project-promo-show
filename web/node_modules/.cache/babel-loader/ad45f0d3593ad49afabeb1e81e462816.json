{"ast":null,"code":"var _jsxFileName = \"/Users/jefersonveiga/Documents/new-project/project-promo-show/web/src/components/Promotion/Form/Form.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { useHistory } from 'react-router';\nimport useApi from 'components/utils/useApi';\nimport { Formik, Form } from 'formik';\nimport Field from 'components/Form/Field/Field';\nimport schema from './schema.js';\nimport './Form.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialValue = {\n  title: '',\n  url: '',\n  imageUrl: '',\n  price: 0\n};\n\nconst PromotionForm = ({\n  id\n}) => {\n  _s();\n\n  const history = useHistory();\n  const [load, loadInfo] = useApi({\n    url: `/promotions/${id}`,\n    method: 'get'\n  });\n  const [save, saveInfo] = useApi({\n    url: id ? `/promotions/${id}` : '/promotions',\n    method: id ? 'put' : 'post',\n    onCompleted: response => {\n      if (!response.error) {\n        history.push('/');\n      }\n    }\n  });\n  useEffect(() => {\n    if (id) {\n      load();\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [id]);\n\n  function onSubmit(formValues) {\n    save({\n      data: formValues\n    });\n  }\n\n  const values = id ? loadInfo.data : initialValue;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Promo Show\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Nova Promo\\xE7\\xE3o\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), !values ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Carregando...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Formik, {\n      initialValues: values,\n      onSubmit: onSubmit,\n      validationSchema: schema,\n      render: ({\n        errors\n      }) => /*#__PURE__*/_jsxDEV(Form, {\n        children: [saveInfo.loading && /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Salvando...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 36\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"promotion-form__group\",\n          children: /*#__PURE__*/_jsxDEV(Field, {\n            id: \"title\",\n            name: \"title\",\n            type: \"text\",\n            label: \"T\\xEDtulo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"promotion-form__group\",\n          children: [/*#__PURE__*/_jsxDEV(Field, {\n            id: \"url\",\n            name: \"url\",\n            type: \"text\",\n            label: \"Link\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 17\n          }, this), errors.url && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"promotion-form__error-message\",\n            children: errors.url\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"promotion-form__group\",\n          children: /*#__PURE__*/_jsxDEV(Field, {\n            id: \"imageUrl\",\n            name: \"imageUrl\",\n            type: \"text\",\n            label: \"Imagen (URL)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"promotion-form__group\",\n          children: /*#__PURE__*/_jsxDEV(Field, {\n            id: \"price\",\n            name: \"price\",\n            type: \"number\",\n            label: \"Pre\\xE7o\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            children: \"Salvar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n};\n\n_s(PromotionForm, \"A6uRvfkU/2wTqBxvAtK98gXshTA=\", false, function () {\n  return [useHistory, useApi, useApi];\n});\n\n_c = PromotionForm;\nexport default PromotionForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"PromotionForm\");","map":{"version":3,"sources":["/Users/jefersonveiga/Documents/new-project/project-promo-show/web/src/components/Promotion/Form/Form.js"],"names":["React","useEffect","useHistory","useApi","Formik","Form","Field","schema","initialValue","title","url","imageUrl","price","PromotionForm","id","history","load","loadInfo","method","save","saveInfo","onCompleted","response","error","push","onSubmit","formValues","data","values","errors","loading"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useHistory } from 'react-router';\nimport useApi from 'components/utils/useApi';\nimport { Formik, Form } from 'formik';\nimport Field from 'components/Form/Field/Field';\nimport schema from './schema.js';\n\nimport './Form.css';\n\n\nconst initialValue = {\n    title:'',\n    url:'',\n    imageUrl:'',\n    price: 0,\n}\n\nconst PromotionForm = ({ id }) => {\n  const history = useHistory();\n  const [load, loadInfo] = useApi({\n    url: `/promotions/${id}`,\n    method: 'get',\n  });\n\n  const [save, saveInfo] = useApi({\n    url: id ? `/promotions/${id}` : '/promotions',\n    method: id ? 'put' : 'post',  \n    onCompleted: (response) => {\n      if(!response.error) {\n        history.push('/');\n      }\n    }\n  })\n\n  useEffect(() => {\n    if (id) {\n      load();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id]);\n\n  function onSubmit(formValues) {\n      save({\n      data: formValues,\n    });\n  }\n\n  const values = id ? loadInfo.data : initialValue;\n\n  return (\n    <div>\n      <h1>Promo Show</h1>\n      <h2>Nova Promoção</h2>\n\n      {!values ? (\n        <div>Carregando...</div>\n      ) : (\n        <Formik\n          initialValues={values}\n          onSubmit={onSubmit}\n          validationSchema={schema}\n          render={({ errors }) => (\n            <Form>\n              {saveInfo.loading && <span>Salvando...</span>}\n              <div className=\"promotion-form__group\">\n                <Field id=\"title\" name=\"title\" type=\"text\" label=\"Título\" />\n                \n              </div>\n              <div className=\"promotion-form__group\">\n                <Field id=\"url\" name=\"url\" type=\"text\" label=\"Link\" />\n                {errors.url && (\n                  <span className=\"promotion-form__error-message\">\n                    {errors.url}\n                  </span>\n                )}\n              </div>\n              <div className=\"promotion-form__group\">\n                <Field\n                  id=\"imageUrl\"\n                  name=\"imageUrl\"\n                  type=\"text\"\n                  label=\"Imagen (URL)\"\n                />\n            \n              </div>\n              <div className=\"promotion-form__group\">\n                <Field id=\"price\" name=\"price\" type=\"number\" label=\"Preço\" />\n            \n              </div>\n              <div>\n                <button type=\"submit\">Salvar</button>\n              </div>\n            </Form>\n          )}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default PromotionForm;"]},"metadata":{},"sourceType":"module"}